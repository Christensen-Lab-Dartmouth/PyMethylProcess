Anaconda with python 3.6 recommended, with environment sourced
R 3.5.1

Build pymethylprocess

1. Clone the repository
2. python setup.py bdist_wheel && python setup.py sdist
3. pip install dist/pymethylprocess-0.1.tar.gz
4. pymethyl-install_r_dependencies # time to grab a cup of coffee

Dataset: GSE81961

1. Create include_col.txt:

Contents of include_col.txt (items are tab delimited (2 columns)):
age (yr):ch1 Age
gender:ch1  Sex
tissue:ch1  Tissue

Preprocessing:

* nohup pymethyl-preprocess download_geo -g GSE81961 &
* nano include_col.txt
* pymethyl-preprocess create_sample_sheet -is ./geo_idats/GSE81961_clinical_info.csv -s geo -i geo_idats/ -os geo_idats/samplesheet.csv -d "disease state:ch1" -c include_col.txt
* mkdir backup_clinical && mv ./geo_idats/GSE81961_clinical_info.csv backup_clinical
* pymethyl-preprocess meffil_encode -is geo_idats/samplesheet.csv -os geo_idats/samplesheet.csv
* pymethyl-preprocess preprocess_pipeline -n 35 -m  -pc -1 -bns 0.05 -pds 0.05 -bnc 0.05 -pdc 0.05 -sc -2 -sd 5 -i ./geo_idats/ -o ./preprocess_outputs/methyl_array.pkl
* pymethyl-utils print_number_sex_cpgs -i preprocess_outputs/methyl_array.pkl
* pymethyl-utils remove_sex -i preprocess_outputs/methyl_array.pkl
* pymethyl-preprocess na_report -i autosomal/methyl_array.pkl -o na_report/
* nohup pymethyl-preprocess imputation_pipeline -i ./autosomal/methyl_array.pkl -s fancyimpute -m KNN -k 5 -st 0.05 -ct 0.05 &
* pymethyl-preprocess feature_select -n 300000
* mkdir visualizations
* nohup pymethyl-visualize transform_plot -o visualizations/umap_embed.html -c disease -nn 8 &
* nohup pymethyl-visualize transform_plot -o visualizations/umap_embed_age.html -c Age -nn 8 &
* nohup pymethyl-visualize transform_plot -o visualizations/umap_embed_sex.html -c Sex -nn 8 &
* pymethyl-utils train_test_val_split -tp .8 -vp .125
